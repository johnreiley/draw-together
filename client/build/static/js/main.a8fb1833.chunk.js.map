{"version":3,"sources":["components/Header.js","services/SocketService.js","components/Join.js","components/Footer.js","components/Home.js","components/CreateRoom.js","services/ToastService.js","components/Draw.js","components/GuardedRoute.js","App.js","reportWebVitals.js","index.js"],"names":["Header","className","Socket","window","socket","Join","nameInput","useRef","roomCodeInput","onSubmit","e","preventDefault","name","current","value","toUpperCase","roomCode","emit","roomId","htmlFor","ref","type","id","maxLength","placeholder","required","Footer","Date","getFullYear","Home","to","CreateRoom","generateToast","message","duration","root","document","querySelector","toast","createElement","classList","add","toastTitle","innerText","toastClose","innerHTML","setAttribute","ariaLabel","toastHeader","appendChild","toastBody","setTimeout","autoHide","remove","removeChild","ontouchend","onclick","clearTimeout","fabric","require","Object","prototype","objectCaching","Draw","uid","console","log","useState","Canvas","canvas","setCanvas","isInit","setIsInit","brushSize","setBrushSize","brushColor","setBrushColor","personalHistory","setPersonalHistory","setRoomState","toolbar","canvasWrapper","personalHistoryRef","userId","updateBrushSize","target","checked","freeDrawingBrush","width","parseInt","handleJoinedRoom","state","loadFromJSON","renderAll","loadState","handleUserJoined","handleUserLeft","emitPath","resetState","clear","setBackgroundColor","useEffect","newCanvas","isDrawingMode","backgroundColor","renderOnAddRemove","setDimensions","offsetWidth","height","offsetHeight","color","onresize","on","json","JSON","stringify","newPersonalState","length","push","path","concat","dispose","title","onClick","toggle","onChange","currentTarget","brush","getPatternSrc","source","call","prevState","slice","disabled","download","href","toDataURL","GuardedRoute","Component","component","auth","rest","render","props","undefined","App","history","useHistory","setUid","setCanvasState","canvasState","handleRoomCreated","routes","exact","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.a8fb1833.chunk.js","sourcesContent":["function Header() {\r\n\r\n  return (\r\n    <div className=\"App-header\">\r\n      <h1 className=\"theme-font text-uppercase\">Draw 2gether</h1>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default Header;","const Socket = window.socket;\r\nexport default Socket;","import { useRef } from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport BackButton from './BackButton';\r\nimport Header from './Header';\r\nimport Socket from '../services/SocketService';\r\n\r\nfunction Join() {\r\n  const nameInput = useRef();\r\n  const roomCodeInput = useRef();\r\n\r\n  let onSubmit = (e) => {\r\n    e.preventDefault();\r\n\r\n    // check fields\r\n    let name = nameInput.current.value.toUpperCase();\r\n    let roomCode = roomCodeInput.current.value.toUpperCase();\r\n    Socket.emit('joinRoom', {name: name, roomId: roomCode});\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <div className=\"row m-2\">\r\n        <Header />\r\n      </div>\r\n      <div className=\"row m-2\">\r\n        <form onSubmit={onSubmit}>\r\n          <div className=\"form-group\">\r\n            <label htmlFor=\"roomCodeInput\" className=\"text-uppercase\">Room Code</label>\r\n            <input ref={roomCodeInput} type=\"text\" id=\"roomCodeInput\" className=\"form-control\" maxLength=\"4\" placeholder=\"enter 4-letter code\" required />\r\n          </div>\r\n          <div className=\"form-group\">\r\n            <label htmlFor=\"nameInput\" className=\"text-uppercase\">Name</label>\r\n            <input ref={nameInput} type=\"text\" id=\"nameInput\" className=\"form-control\" maxLength=\"12\" placeholder=\"enter your name\" required />\r\n          </div>\r\n          <button type=\"submit\" id=\"joinBtn\" className=\"btn btn-success btn-large text-uppercase\">Join</button>\r\n        </form>\r\n      </div>\r\n    </>\r\n  )\r\n}\r\n\r\nexport default Join;","function Footer() {\r\n  return (\r\n    <footer>\r\n      Copyright &copy; {(new Date()).getFullYear()}\r\n    </footer>\r\n  )\r\n}\r\n\r\nexport default Footer\r\n","import './Home.css';\r\nimport { useEffect } from 'react';\r\nimport Header from './Header';\r\nimport Footer from './Footer';\r\nimport { Link } from 'react-router-dom';\r\nimport Socket from '../services/SocketService';\r\n\r\nfunction Home() {\r\n\r\n  return (\r\n    <>\r\n      <div className=\"row m-2\">\r\n        <Header />\r\n      </div>\r\n      <div className=\"row m-2\">\r\n        <div className=\"col home-options\">\r\n          <Link to=\"/joinRoom\" className=\"btn btn-success btn-large\">Join a Room</Link>\r\n          <Link to=\"/createRoom\" className=\"btn btn-secondary btn-large\">Create a Room</Link>\r\n        </div>\r\n      </div>\r\n      <Footer />\r\n    </>\r\n  )\r\n}\r\n\r\nexport default Home\r\n","import { useRef } from 'react';\r\nimport Header from './Header';\r\nimport Socket from '../services/SocketService';\r\n\r\nfunction CreateRoom() {\r\n  const nameInput = useRef();\r\n\r\n  let onSubmit = (e) => { \r\n    e.preventDefault();\r\n    let name = nameInput.current.value.toUpperCase();\r\n    Socket.emit('createRoom', name);\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <div className=\"row m-2\">\r\n        <Header />\r\n      </div>\r\n      <div className=\"row m-2\">\r\n        <form onSubmit={onSubmit}>\r\n          <div className=\"form-group\">\r\n            <label htmlFor=\"nameInput\" className=\"text-uppercase\">Name</label>\r\n            <input ref={nameInput} type=\"text\" id=\"nameInput\" className=\"form-control\" maxLength=\"12\" placeholder=\"enter your name\" required />\r\n          </div>\r\n          <button type=\"submit\" id=\"joinBtn\" className=\"btn btn-success btn-large text-uppercase\">Create Room</button>\r\n        </form>\r\n      </div>\r\n    </>\r\n  )\r\n}\r\n\r\nexport default CreateRoom\r\n","/**\r\n* \r\n* @param message The message to be displayed\r\n* @param duration The duration of the toast in milliseconds (1000 = 1 second)\r\n*/\r\nexport const generateToast = (message, duration) => {\r\n  var root = document.querySelector('#root');\r\n  var toast = document.createElement('div');\r\n  toast.classList.add('toast');\r\n\r\n  var toastTitle = document.createElement('strong');\r\n  toastTitle.classList.add('mr-auto');\r\n  toastTitle.innerText = 'Draw Together';\r\n  var toastClose = document.createElement('button');\r\n  toastClose.innerHTML = `<span aria-hidden=\"true\">&times;</span>`;\r\n  toastClose.type = 'button';\r\n  toastClose.classList.add('ml-2', 'mb-1', 'close');\r\n  toastClose.setAttribute('data-dismiss', 'toast');\r\n  toastClose.ariaLabel = 'Close';\r\n  var toastHeader = document.createElement('div');\r\n  toastHeader.classList.add('toast-header');\r\n  toastHeader.appendChild(toastTitle);\r\n  toastHeader.appendChild(toastClose);\r\n\r\n  var toastBody = document.createElement('div');\r\n  toastBody.classList.add('toast-body');\r\n  toastBody.innerHTML = message;\r\n\r\n  toast.appendChild(toastHeader);\r\n  toast.appendChild(toastBody);\r\n\r\n  // toast.innerHTML = `\r\n  //   <div class=\"toast-header\">\r\n  //     <strong class=\"mr-auto\">Draw Together</strong>\r\n  //     <button type=\"button\" class=\"ml-2 mb-1 close\" data-dismiss=\"toast\" aria-label=\"Close\">\r\n  //       <span aria-hidden=\"true\">&times;</span>\r\n  //     </button>\r\n  //   </div>\r\n  //   <div class=\"toast-body\">\r\n  //     ${message}\r\n  //   </div>`;\r\n\r\n  root.appendChild(toast);\r\n\r\n  setTimeout(() => {\r\n    toast.classList.add('toast-show');\r\n  }, 20);\r\n\r\n  var autoHide = setTimeout(() => {\r\n    toast.classList.remove('toast-show');\r\n    setTimeout(() => {\r\n      root.removeChild(toast);\r\n    }, 300);\r\n  }, duration);\r\n\r\n  toastClose.ontouchend = \r\n    toastClose.onclick = () => {\r\n      toast.classList.remove('toast-show');\r\n      setTimeout(() => {\r\n        root.removeChild(toast);\r\n        clearTimeout(autoHide);\r\n      }, 300);\r\n    }\r\n}\r\n\r\n","import './Draw.css';\r\nimport { useState, useEffect, useRef } from 'react';\r\nimport Socket from '../services/SocketService';\r\nimport { generateToast } from '../services/ToastService';\r\nconst fabric = require('fabric').fabric;\r\nfabric.Object.prototype.objectCaching = false;\r\n\r\nfunction Draw({uid}) {\r\n  console.log(\"UID: \", uid);\r\n  const [canvas, setCanvas] = useState(new fabric.Canvas());\r\n  const [isInit, setIsInit] = useState(true);\r\n  const [brushSize, setBrushSize] = useState(\"5\");\r\n  const [brushColor, setBrushColor] = useState('#000000');\r\n  const [personalHistory, setPersonalHistory] = useState([]);\r\n  const [roomState, setRoomState] = useState([]);\r\n  const toolbar = useRef();\r\n  const canvasWrapper = useRef();\r\n  const personalHistoryRef = useRef();\r\n  const roomHistoryRef = useRef();\r\n  const userId = uid;\r\n\r\n  personalHistoryRef.current = personalHistory;\r\n\r\n  useEffect(() => {\r\n    console.log(\"useEffect()\")\r\n    if (isInit) {\r\n      console.log('initialize the canvas...')\r\n      setIsInit(false);\r\n      const newCanvas = new fabric.Canvas('c', {\r\n        isDrawingMode: true,\r\n        backgroundColor: '#ffffff',\r\n        renderOnAddRemove: false\r\n      })\r\n      newCanvas.setDimensions(\r\n        {width: canvasWrapper.current.offsetWidth, height: canvasWrapper.current.offsetHeight}\r\n      );\r\n      if (newCanvas.freeDrawingBrush) {\r\n        newCanvas.freeDrawingBrush.color = brushColor;\r\n        newCanvas.freeDrawingBrush.width = parseInt(brushSize, 10) || 1;\r\n      }\r\n      // auto adjust the canvas size\r\n      window.onresize = function() {\r\n        newCanvas.setDimensions(\r\n          {width: canvasWrapper.current.offsetWidth, height: canvasWrapper.current.offsetHeight}\r\n        );\r\n      }\r\n      newCanvas.on('path:created', (e) => {\r\n        let json = JSON.stringify(newCanvas);\r\n        let newPersonalState = [];\r\n        if (personalHistoryRef.current.length === 0) {\r\n          newPersonalState.push(e.path);\r\n        } else {\r\n          newPersonalState = [...personalHistoryRef.current][personalHistoryRef.current.length - 1].concat([e.path]);\r\n        }\r\n        setPersonalHistory([...personalHistoryRef.current, newPersonalState]);\r\n        console.log(\"HISTORY: \", personalHistoryRef.current);\r\n        emitPath(json);\r\n      });\r\n      setCanvas(newCanvas);\r\n      \r\n      Socket.on('draw', (state) => {\r\n        newCanvas.loadFromJSON(state, () => {\r\n          newCanvas.renderAll();\r\n        })\r\n        setRoomState(state);\r\n      });\r\n      Socket.on('clear', ({name, state}) => {\r\n        newCanvas.loadFromJSON(state, () => {\r\n          newCanvas.renderAll();\r\n        });\r\n        generateToast(`<strong>${name}</strong> cleared their drawing`, 2000);\r\n      });\r\n      Socket.on('undo', (state) => {\r\n        newCanvas.loadFromJSON(state, () => {\r\n          newCanvas.renderAll();\r\n        });\r\n      });\r\n      Socket.on('joinedRoom', handleJoinedRoom);\r\n      Socket.on('userJoined', handleUserJoined);\r\n      Socket.on('userLeft', handleUserLeft);\r\n    }\r\n\r\n    return () => { canvas.dispose() }\r\n  }, [])\r\n\r\n  function updateBrushSize(e) {\r\n    if (e.target.value !== brushSize) {\r\n      e.target.checked = true;\r\n      setBrushSize(e.target.value);\r\n      canvas.freeDrawingBrush.width = parseInt(e.target.value, 10) || 1;\r\n    }\r\n  }\r\n\r\n  function handleClear() { \r\n    Socket.emit('clear');\r\n    resetState();\r\n  }\r\n\r\n  function handleUndo() {\r\n    if (personalHistory.length > 1) {\r\n      // grab the second to last because that's the previous state\r\n      let prevState = personalHistory[personalHistory.length - 2];\r\n      // set the history excluding the last item which is the current state\r\n      setPersonalHistory([...personalHistory.slice(0, personalHistory.length - 1)]);\r\n      if (prevState === null) {\r\n        prevState = JSON.stringify([]);\r\n      }\r\n      Socket.emit('undo', JSON.stringify(prevState));\r\n    } else {\r\n      Socket.emit('undo', JSON.stringify([]));\r\n      resetState();\r\n    }\r\n  }\r\n\r\n  function handleSave(e) {\r\n    e.currentTarget.download = \"drawing.png\";\r\n    e.currentTarget.href = canvas.toDataURL();\r\n  }\r\n\r\n  function handleColorChange(e) {\r\n    setBrushColor(e.currentTarget.value);\r\n    var brush = canvas.freeDrawingBrush;\r\n    brush.color = e.currentTarget.value;\r\n    if (brush.getPatternSrc) {\r\n      brush.source = brush.getPatternSrc.call(brush);\r\n    }\r\n  }\r\n\r\n  function handleJoinedRoom({uid, state}) {\r\n    loadState(state);\r\n  }\r\n\r\n  function handleUserJoined(name) {\r\n    generateToast(`<strong>${name}</strong> joined`, 2000);\r\n  }\r\n\r\n  function handleUserLeft(name) {\r\n    generateToast(`<strong>${name}</strong> left`, 2000);\r\n  }\r\n\r\n  /*****************************************************\r\n   * THESE ARE FUNCTIONS FOR MAINTAINING THE STATE OF\r\n   * THE CANVAS.\r\n   ****************************************************/\r\n  function emitPath(state) {\r\n    Socket.emit('draw', {uid: userId, state});\r\n  }\r\n  function saveState() {\r\n    setPersonalHistory([...personalHistory, JSON.stringify(canvas)]);\r\n    console.log(\"HISTORY: \", personalHistory)\r\n    emitPath();\r\n  }\r\n  function resetState() {\r\n    setPersonalHistory([]);\r\n    canvas.clear();\r\n    canvas.setBackgroundColor('#ffffff');\r\n  }\r\n  function updateState(state) {\r\n    let newState = JSON.parse(JSON.stringify({...canvas, objects: state}));\r\n    canvas.loadFromJSON(newState, () => {\r\n      canvas.renderAll();\r\n    });\r\n    emitPath(state);\r\n    // setCanvas(canvas);\r\n  }\r\n  function loadState(state) {\r\n    canvas.loadFromJSON(state, () => {\r\n      canvas.renderAll();\r\n    });\r\n  }\r\n\r\n  function filterExistingPaths(newState, oldState) {\r\n    if (oldState === undefined) {\r\n      return newState;\r\n    }\r\n    // go through each path\r\n    let newPaths = newState.filter(e1 => {\r\n      // if the path doesn't match with a path in the state, return it (because it's a new one)\r\n      let match = oldState.find(e2 => {\r\n        return (e2.top === e1.top && e2.left === e2.left && \r\n          e2.stroke === e1.stroke && e2.path.length === e1.path.length);\r\n      });\r\n      return match === undefined;\r\n    });\r\n  \r\n    return newPaths;\r\n  }\r\n  /****************************************************/\r\n\r\n  function toggleToolbar() {\r\n    toolbar.current.classList.toggle('open');\r\n  }\r\n\r\n  return (\r\n    <main className=\"draw-content\">\r\n      <div id=\"canvas-wrapper\" ref={canvasWrapper}>\r\n        <canvas id=\"c\"></canvas>\r\n      </div>\r\n      <div id=\"tools\" className=\"open\" ref={toolbar}>\r\n        <section>\r\n          <button \r\n            id=\"toggle-tools-btn\" \r\n            className=\"btn\" \r\n            title=\"toggle tools\"\r\n            onClick={toggleToolbar}>\r\n            <i className=\"material-icons\">chevron_left</i>\r\n          </button>\r\n        </section>\r\n\r\n        <section>\r\n          <div id=\"drawing-width-options\" className=\"mt-2\">\r\n\r\n            <label className=\"custom-radio-container\" htmlFor=\"draw-radio-sm\">\r\n              <input \r\n                type=\"radio\" \r\n                name=\"draw-size\" \r\n                id=\"draw-radio-sm\" \r\n                className=\"draw-size-option\" \r\n                value=\"5\" \r\n                onChange={updateBrushSize} />\r\n              <span className=\"btn btn-outline-secondary icon-btn\" id=\"draw-size-sm\">\r\n                <div className=\"circle-sm\"></div>\r\n              </span>\r\n            </label>\r\n\r\n            <label className=\"custom-radio-container\" htmlFor=\"draw-radio-md\">\r\n              <input \r\n                type=\"radio\" \r\n                name=\"draw-size\" \r\n                id=\"draw-radio-md\" \r\n                className=\"draw-size-option\" \r\n                value=\"10\"\r\n                onChange={updateBrushSize}/>\r\n              <span className=\"btn btn-outline-secondary icon-btn\" id=\"draw-size-md\">\r\n                <div className=\"circle-md\"></div>\r\n              </span>\r\n            </label>\r\n            \r\n            <label className=\"custom-radio-container\" htmlFor=\"draw-radio-lg\">\r\n              <input\r\n                type=\"radio\"\r\n                name=\"draw-size\"\r\n                id=\"draw-radio-lg\"\r\n                className=\"draw-size-option\"\r\n                value=\"25\"\r\n                onChange={updateBrushSize} />\r\n              <span className=\"btn btn-outline-secondary icon-btn\" id=\"draw-size-lg\">\r\n                <div className=\"circle-lg\"></div>\r\n              </span>\r\n            </label>\r\n\r\n            <label className=\"custom-radio-container\" htmlFor=\"draw-radio-xl\">\r\n              <input\r\n                type=\"radio\"\r\n                name=\"draw-size\"\r\n                id=\"draw-radio-xl\"\r\n                className=\"draw-size-option\"\r\n                value=\"50\"\r\n                onChange={updateBrushSize} />\r\n              <span className=\"btn btn-outline-secondary icon-btn\" id=\"draw-size-xl\">\r\n                <div className=\"circle-xl\"></div>\r\n              </span>\r\n            </label>\r\n\r\n          </div>\r\n        </section>\r\n\r\n        <section className=\"mb-2\">\r\n          <input \r\n            type=\"color\" \r\n            value={brushColor}\r\n            id=\"drawing-color\" \r\n            title=\"color picker\"\r\n            onChange={handleColorChange} />\r\n        </section>\r\n        <br />\r\n\r\n        <section>\r\n          <button \r\n            id=\"undo-stroke\" \r\n            className=\"btn btn-outline-secondary icon-btn mb-2\" \r\n            title=\"undo\"\r\n            onClick={handleUndo}\r\n            disabled={personalHistory.length === 0}>\r\n            <i className=\"material-icons\">undo</i>\r\n          </button>\r\n          <button \r\n            id=\"clear-canvas\" \r\n            className=\"btn btn-outline-danger icon-btn mb-2\" \r\n            title=\"clear\"\r\n            onClick={handleClear}>\r\n            <i className=\"material-icons\">delete</i>\r\n          </button>\r\n          <a \r\n            id=\"save-image\" \r\n            className=\"btn btn-outline-primary icon-btn\" \r\n            title=\"save\"\r\n            onClick={handleSave}>\r\n            <i className=\"material-icons\">save</i>\r\n          </a>\r\n        </section>\r\n      </div>\r\n    </main>\r\n  )\r\n}\r\n\r\nexport default Draw;","\r\nimport React from 'react';\r\nimport { Route, Redirect } from \"react-router-dom\";\r\n\r\nconst GuardedRoute = ({ component: Component, auth, ...rest }) => (\r\n    <Route {...rest} render={(props) => (\r\n        auth !== undefined\r\n            ? <Component {...props} />\r\n            : <Redirect to='/' />\r\n    )} />\r\n)\r\n\r\nexport default GuardedRoute;","import './App.css';\nimport { useState, useEffect } from 'react';\nimport { BrowserRouter as Router, Route, useHistory, Switch } from 'react-router-dom';\nimport Join from './components/Join';\nimport Home from './components/Home';\nimport CreateRoom from './components/CreateRoom';\nimport Draw from './components/Draw';\nimport GuardedRoute from './components/GuardedRoute';\nimport Socket from './services/SocketService';\nimport { generateToast } from './services/ToastService';\n\nfunction App() {\n  const history = useHistory();\n  const [uid, setUid] = useState();\n  const [canvasState, setCanvasState] = useState();\n\n  useEffect(() => {\n    Socket.on('joinedRoom', handleJoinedRoom);\n    Socket.on('roomCreated', handleRoomCreated);\n  }, []);\n\n  function handleJoinedRoom({uid, canvasState}) {\n    console.log('JOINED ROOM');\n    setUid(uid);\n    setCanvasState(canvasState);\n    history.push('/draw');\n  }\n\n  function handleRoomCreated({uid, roomId}) {\n    console.log('ROOM CREATED');\n    console.log('ROOM ID: ', roomId);\n    setUid(uid);\n    history.push('/draw');\n    let message = `The room code is <strong>${roomId}</strong>. Share it with your friends.`;\n    generateToast(message, 60000);\n  }\n\n  const routes = (\n    <Switch>\n      <Route exact path=\"/\" component={Home} />\n      <Route path=\"/joinRoom\" component={Join} />\n      <Route path=\"/createRoom\" component={CreateRoom} />\n      <GuardedRoute path=\"/draw\" component={Draw} auth={uid} uid={uid} />\n    </Switch>\n  )\n\n  return (\n    <Switch>\n      <div className=\"App\">\n        <div className=\"App-content\">\n          { routes }\n        </div>\n      </div>\n    </Switch>\n  );\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { BrowserRouter as Router } from 'react-router-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <Router>\n      <App />\n    </Router>\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}