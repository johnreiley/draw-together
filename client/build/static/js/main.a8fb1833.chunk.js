(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{29:function(e,t,n){},30:function(e,t,n){},35:function(e,t,n){},36:function(e,t,n){},42:function(e,t){},43:function(e,t){},44:function(e,t){},45:function(e,t,n){"use strict";n.r(t);var c=n(0),a=n(1),r=n.n(a),s=n(21),o=n.n(s),i=n(7),l=(n(29),n(8)),d=(n(30),n(2));var u=function(){return Object(c.jsx)("div",{className:"App-header",children:Object(c.jsx)("h1",{className:"theme-font text-uppercase",children:"Draw 2gether"})})},j=window.socket;var b=function(){var e=Object(a.useRef)(),t=Object(a.useRef)();return Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)("div",{className:"row m-2",children:Object(c.jsx)(u,{})}),Object(c.jsx)("div",{className:"row m-2",children:Object(c.jsxs)("form",{onSubmit:function(n){n.preventDefault();var c=e.current.value.toUpperCase(),a=t.current.value.toUpperCase();j.emit("joinRoom",{name:c,roomId:a})},children:[Object(c.jsxs)("div",{className:"form-group",children:[Object(c.jsx)("label",{htmlFor:"roomCodeInput",className:"text-uppercase",children:"Room Code"}),Object(c.jsx)("input",{ref:t,type:"text",id:"roomCodeInput",className:"form-control",maxLength:"4",placeholder:"enter 4-letter code",required:!0})]}),Object(c.jsxs)("div",{className:"form-group",children:[Object(c.jsx)("label",{htmlFor:"nameInput",className:"text-uppercase",children:"Name"}),Object(c.jsx)("input",{ref:e,type:"text",id:"nameInput",className:"form-control",maxLength:"12",placeholder:"enter your name",required:!0})]}),Object(c.jsx)("button",{type:"submit",id:"joinBtn",className:"btn btn-success btn-large text-uppercase",children:"Join"})]})})]})};n(35);var m=function(){return Object(c.jsxs)("footer",{children:["Copyright \xa9 ",(new Date).getFullYear()]})};var h=function(){return Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)("div",{className:"row m-2",children:Object(c.jsx)(u,{})}),Object(c.jsx)("div",{className:"row m-2",children:Object(c.jsxs)("div",{className:"col home-options",children:[Object(c.jsx)(i.b,{to:"/joinRoom",className:"btn btn-success btn-large",children:"Join a Room"}),Object(c.jsx)(i.b,{to:"/createRoom",className:"btn btn-secondary btn-large",children:"Create a Room"})]})}),Object(c.jsx)(m,{})]})};var O=function(){var e=Object(a.useRef)();return Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)("div",{className:"row m-2",children:Object(c.jsx)(u,{})}),Object(c.jsx)("div",{className:"row m-2",children:Object(c.jsxs)("form",{onSubmit:function(t){t.preventDefault();var n=e.current.value.toUpperCase();j.emit("createRoom",n)},children:[Object(c.jsxs)("div",{className:"form-group",children:[Object(c.jsx)("label",{htmlFor:"nameInput",className:"text-uppercase",children:"Name"}),Object(c.jsx)("input",{ref:e,type:"text",id:"nameInput",className:"form-control",maxLength:"12",placeholder:"enter your name",required:!0})]}),Object(c.jsx)("button",{type:"submit",id:"joinBtn",className:"btn btn-success btn-large text-uppercase",children:"Create Room"})]})})]})},f=n(10),p=n(13),x=(n(36),function(e,t){var n=document.querySelector("#root"),c=document.createElement("div");c.classList.add("toast");var a=document.createElement("strong");a.classList.add("mr-auto"),a.innerText="Draw Together";var r=document.createElement("button");r.innerHTML='<span aria-hidden="true">&times;</span>',r.type="button",r.classList.add("ml-2","mb-1","close"),r.setAttribute("data-dismiss","toast"),r.ariaLabel="Close";var s=document.createElement("div");s.classList.add("toast-header"),s.appendChild(a),s.appendChild(r);var o=document.createElement("div");o.classList.add("toast-body"),o.innerHTML=e,c.appendChild(s),c.appendChild(o),n.appendChild(c),setTimeout((function(){c.classList.add("toast-show")}),20);var i=setTimeout((function(){c.classList.remove("toast-show"),setTimeout((function(){n.removeChild(c)}),300)}),t);r.ontouchend=r.onclick=function(){c.classList.remove("toast-show"),setTimeout((function(){n.removeChild(c),clearTimeout(i)}),300)}}),g=n(37).fabric;g.Object.prototype.objectCaching=!1;var v=function(e){var t=e.uid;console.log("UID: ",t);var n=Object(a.useState)(new g.Canvas),r=Object(l.a)(n,2),s=r[0],o=r[1],i=Object(a.useState)(!0),d=Object(l.a)(i,2),u=d[0],b=d[1],m=Object(a.useState)("5"),h=Object(l.a)(m,2),O=h[0],f=h[1],v=Object(a.useState)("#000000"),w=Object(l.a)(v,2),N=w[0],C=w[1],y=Object(a.useState)([]),R=Object(l.a)(y,2),S=R[0],D=R[1],F=Object(a.useState)([]),L=Object(l.a)(F,2),T=(L[0],L[1]),I=Object(a.useRef)(),z=Object(a.useRef)(),J=Object(a.useRef)(),k=(Object(a.useRef)(),t);function E(e){e.target.value!==O&&(e.target.checked=!0,f(e.target.value),s.freeDrawingBrush.width=parseInt(e.target.value,10)||1)}function A(e){e.uid;!function(e){s.loadFromJSON(e,(function(){s.renderAll()}))}(e.state)}function B(e){x("<strong>".concat(e,"</strong> joined"),2e3)}function M(e){x("<strong>".concat(e,"</strong> left"),2e3)}function H(e){j.emit("draw",{uid:k,state:e})}function U(){D([]),s.clear(),s.setBackgroundColor("#ffffff")}return J.current=S,Object(a.useEffect)((function(){if(console.log("useEffect()"),u){console.log("initialize the canvas..."),b(!1);var e=new g.Canvas("c",{isDrawingMode:!0,backgroundColor:"#ffffff",renderOnAddRemove:!1});e.setDimensions({width:z.current.offsetWidth,height:z.current.offsetHeight}),e.freeDrawingBrush&&(e.freeDrawingBrush.color=N,e.freeDrawingBrush.width=parseInt(O,10)||1),window.onresize=function(){e.setDimensions({width:z.current.offsetWidth,height:z.current.offsetHeight})},e.on("path:created",(function(t){var n=JSON.stringify(e),c=[];0===J.current.length?c.push(t.path):c=Object(p.a)(J.current)[J.current.length-1].concat([t.path]),D([].concat(Object(p.a)(J.current),[c])),console.log("HISTORY: ",J.current),H(n)})),o(e),j.on("draw",(function(t){e.loadFromJSON(t,(function(){e.renderAll()})),T(t)})),j.on("clear",(function(t){var n=t.name,c=t.state;e.loadFromJSON(c,(function(){e.renderAll()})),x("<strong>".concat(n,"</strong> cleared their drawing"),2e3)})),j.on("undo",(function(t){e.loadFromJSON(t,(function(){e.renderAll()}))})),j.on("joinedRoom",A),j.on("userJoined",B),j.on("userLeft",M)}return function(){s.dispose()}}),[]),Object(c.jsxs)("main",{className:"draw-content",children:[Object(c.jsx)("div",{id:"canvas-wrapper",ref:z,children:Object(c.jsx)("canvas",{id:"c"})}),Object(c.jsxs)("div",{id:"tools",className:"open",ref:I,children:[Object(c.jsx)("section",{children:Object(c.jsx)("button",{id:"toggle-tools-btn",className:"btn",title:"toggle tools",onClick:function(){I.current.classList.toggle("open")},children:Object(c.jsx)("i",{className:"material-icons",children:"chevron_left"})})}),Object(c.jsx)("section",{children:Object(c.jsxs)("div",{id:"drawing-width-options",className:"mt-2",children:[Object(c.jsxs)("label",{className:"custom-radio-container",htmlFor:"draw-radio-sm",children:[Object(c.jsx)("input",{type:"radio",name:"draw-size",id:"draw-radio-sm",className:"draw-size-option",value:"5",onChange:E}),Object(c.jsx)("span",{className:"btn btn-outline-secondary icon-btn",id:"draw-size-sm",children:Object(c.jsx)("div",{className:"circle-sm"})})]}),Object(c.jsxs)("label",{className:"custom-radio-container",htmlFor:"draw-radio-md",children:[Object(c.jsx)("input",{type:"radio",name:"draw-size",id:"draw-radio-md",className:"draw-size-option",value:"10",onChange:E}),Object(c.jsx)("span",{className:"btn btn-outline-secondary icon-btn",id:"draw-size-md",children:Object(c.jsx)("div",{className:"circle-md"})})]}),Object(c.jsxs)("label",{className:"custom-radio-container",htmlFor:"draw-radio-lg",children:[Object(c.jsx)("input",{type:"radio",name:"draw-size",id:"draw-radio-lg",className:"draw-size-option",value:"25",onChange:E}),Object(c.jsx)("span",{className:"btn btn-outline-secondary icon-btn",id:"draw-size-lg",children:Object(c.jsx)("div",{className:"circle-lg"})})]}),Object(c.jsxs)("label",{className:"custom-radio-container",htmlFor:"draw-radio-xl",children:[Object(c.jsx)("input",{type:"radio",name:"draw-size",id:"draw-radio-xl",className:"draw-size-option",value:"50",onChange:E}),Object(c.jsx)("span",{className:"btn btn-outline-secondary icon-btn",id:"draw-size-xl",children:Object(c.jsx)("div",{className:"circle-xl"})})]})]})}),Object(c.jsx)("section",{className:"mb-2",children:Object(c.jsx)("input",{type:"color",value:N,id:"drawing-color",title:"color picker",onChange:function(e){C(e.currentTarget.value);var t=s.freeDrawingBrush;t.color=e.currentTarget.value,t.getPatternSrc&&(t.source=t.getPatternSrc.call(t))}})}),Object(c.jsx)("br",{}),Object(c.jsxs)("section",{children:[Object(c.jsx)("button",{id:"undo-stroke",className:"btn btn-outline-secondary icon-btn mb-2",title:"undo",onClick:function(){if(S.length>1){var e=S[S.length-2];D(Object(p.a)(S.slice(0,S.length-1))),null===e&&(e=JSON.stringify([])),j.emit("undo",JSON.stringify(e))}else j.emit("undo",JSON.stringify([])),U()},disabled:0===S.length,children:Object(c.jsx)("i",{className:"material-icons",children:"undo"})}),Object(c.jsx)("button",{id:"clear-canvas",className:"btn btn-outline-danger icon-btn mb-2",title:"clear",onClick:function(){j.emit("clear"),U()},children:Object(c.jsx)("i",{className:"material-icons",children:"delete"})}),Object(c.jsx)("a",{id:"save-image",className:"btn btn-outline-primary icon-btn",title:"save",onClick:function(e){e.currentTarget.download="drawing.png",e.currentTarget.href=s.toDataURL()},children:Object(c.jsx)("i",{className:"material-icons",children:"save"})})]})]})]})},w=n(23),N=function(e){var t=e.component,n=e.auth,a=Object(w.a)(e,["component","auth"]);return Object(c.jsx)(d.b,Object(f.a)(Object(f.a)({},a),{},{render:function(e){return void 0!==n?Object(c.jsx)(t,Object(f.a)({},e)):Object(c.jsx)(d.a,{to:"/"})}}))};var C=function(){var e=Object(d.g)(),t=Object(a.useState)(),n=Object(l.a)(t,2),r=n[0],s=n[1],o=Object(a.useState)(),i=Object(l.a)(o,2),u=(i[0],i[1]);function m(t){var n=t.uid,c=t.canvasState;console.log("JOINED ROOM"),s(n),u(c),e.push("/draw")}function f(t){var n=t.uid,c=t.roomId;console.log("ROOM CREATED"),console.log("ROOM ID: ",c),s(n),e.push("/draw");var a="The room code is <strong>".concat(c,"</strong>. Share it with your friends.");x(a,6e4)}Object(a.useEffect)((function(){j.on("joinedRoom",m),j.on("roomCreated",f)}),[]);var p=Object(c.jsxs)(d.d,{children:[Object(c.jsx)(d.b,{exact:!0,path:"/",component:h}),Object(c.jsx)(d.b,{path:"/joinRoom",component:b}),Object(c.jsx)(d.b,{path:"/createRoom",component:O}),Object(c.jsx)(N,{path:"/draw",component:v,auth:r,uid:r})]});return Object(c.jsx)(d.d,{children:Object(c.jsx)("div",{className:"App",children:Object(c.jsx)("div",{className:"App-content",children:p})})})},y=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,46)).then((function(t){var n=t.getCLS,c=t.getFID,a=t.getFCP,r=t.getLCP,s=t.getTTFB;n(e),c(e),a(e),r(e),s(e)}))};o.a.render(Object(c.jsx)(r.a.StrictMode,{children:Object(c.jsx)(i.a,{children:Object(c.jsx)(C,{})})}),document.getElementById("root")),y()}},[[45,1,2]]]);
//# sourceMappingURL=main.a8fb1833.chunk.js.map