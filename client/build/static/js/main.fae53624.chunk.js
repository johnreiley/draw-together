(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{29:function(e,t,n){},30:function(e,t,n){},35:function(e,t,n){},36:function(e,t,n){},42:function(e,t){},43:function(e,t){},44:function(e,t){},45:function(e,t,n){"use strict";n.r(t);var c=n(0),a=n(1),s=n.n(a),r=n(21),o=n.n(r),i=n(7),l=(n(29),n(8)),d=(n(30),n(2));var u=function(){return Object(c.jsx)("div",{className:"App-header",children:Object(c.jsx)("h1",{className:"theme-font text-uppercase",children:"Draw Together"})})},j=window.socket;var b=function(){var e=Object(a.useRef)(),t=Object(a.useRef)();return Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)("div",{className:"row m-2",children:Object(c.jsx)(u,{})}),Object(c.jsx)("div",{className:"row m-2",children:Object(c.jsxs)("form",{onSubmit:function(n){n.preventDefault();var c=e.current.value.toUpperCase(),a=t.current.value.toUpperCase();j.emit("joinRoom",{name:c,roomId:a})},children:[Object(c.jsxs)("div",{className:"form-group",children:[Object(c.jsx)("label",{htmlFor:"roomCodeInput",className:"text-uppercase",children:"Room Code"}),Object(c.jsx)("input",{ref:t,type:"text",id:"roomCodeInput",className:"form-control",maxLength:"4",placeholder:"enter 4-letter code",required:!0})]}),Object(c.jsxs)("div",{className:"form-group",children:[Object(c.jsx)("label",{htmlFor:"nameInput",className:"text-uppercase",children:"Name"}),Object(c.jsx)("input",{ref:e,type:"text",id:"nameInput",className:"form-control",maxLength:"12",placeholder:"enter your name",required:!0})]}),Object(c.jsx)("button",{type:"submit",id:"joinBtn",className:"btn btn-success btn-large text-uppercase",children:"Join"})]})})]})};n(35);var m=function(){return Object(c.jsxs)("footer",{children:["Copyright \xa9 ",(new Date).getFullYear()]})};var h=function(){return Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)("div",{className:"row m-2",children:Object(c.jsx)(u,{})}),Object(c.jsx)("div",{className:"row m-2",children:Object(c.jsxs)("div",{className:"col home-options",children:[Object(c.jsx)(i.b,{to:"/joinRoom",className:"btn btn-success btn-large",children:"Join a Room"}),Object(c.jsx)(i.b,{to:"/createRoom",className:"btn btn-secondary btn-large",children:"Create a Room"})]})}),Object(c.jsx)(m,{})]})};var O=function(){var e=Object(a.useRef)();return Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)("div",{className:"row m-2",children:Object(c.jsx)(u,{})}),Object(c.jsx)("div",{className:"row m-2",children:Object(c.jsxs)("form",{onSubmit:function(t){t.preventDefault();var n=e.current.value.toUpperCase();j.emit("createRoom",n)},children:[Object(c.jsxs)("div",{className:"form-group",children:[Object(c.jsx)("label",{htmlFor:"nameInput",className:"text-uppercase",children:"Name"}),Object(c.jsx)("input",{ref:e,type:"text",id:"nameInput",className:"form-control",maxLength:"12",placeholder:"enter your name",required:!0})]}),Object(c.jsx)("button",{type:"submit",id:"joinBtn",className:"btn btn-success btn-large text-uppercase",children:"Create Room"})]})})]})},f=n(10),p=(n(36),function(e,t){var n=document.querySelector("#root"),c=document.createElement("div");c.classList.add("toast");var a=document.createElement("strong");a.classList.add("mr-auto"),a.innerText="Draw Together";var s=document.createElement("button");s.innerHTML='<span aria-hidden="true">&times;</span>',s.type="button",s.classList.add("ml-2","mb-1","close"),s.setAttribute("data-dismiss","toast"),s.ariaLabel="Close";var r=document.createElement("div");r.classList.add("toast-header"),r.appendChild(a),r.appendChild(s);var o=document.createElement("div");o.classList.add("toast-body"),o.innerHTML=e,c.appendChild(r),c.appendChild(o),n.appendChild(c),setTimeout((function(){c.classList.add("toast-show")}),20);var i=setTimeout((function(){c.classList.remove("toast-show"),setTimeout((function(){n.removeChild(c)}),300)}),t);s.ontouchend=s.onclick=function(){c.classList.remove("toast-show"),setTimeout((function(){n.removeChild(c),clearTimeout(i)}),300)}}),x=n(37).fabric;var g=function(e){var t=e.uid;console.log("UID: ",t);var n=Object(a.useState)(new x.Canvas),s=Object(l.a)(n,2),r=s[0],o=s[1],i=Object(a.useState)(!0),d=Object(l.a)(i,2),u=d[0],b=d[1],m=Object(a.useState)("5"),h=Object(l.a)(m,2),O=h[0],g=h[1],v=Object(a.useState)("#000000"),w=Object(l.a)(v,2),N=w[0],C=w[1],y=Object(a.useState)([]),S=Object(l.a)(y,2),R=S[0],D=S[1],L=Object(a.useRef)(),T=Object(a.useRef)(),F=t;function I(e){e.target.value!==O&&(e.target.checked=!0,g(e.target.value),r.freeDrawingBrush.width=parseInt(e.target.value,10)||1)}function k(e){e.uid;var t,n=e.canvasState;t=n,r.loadFromJSON(t,(function(){r.renderAll(),D([].concat(Object(f.a)(R),[JSON.stringify(r)]))}))}function z(e){p("<strong>".concat(e,"</strong> joined"),2e3)}function E(e){p("<strong>".concat(e,"</strong> left"),2e3)}function J(e){j.emit("draw",{uid:F,state:e})}function B(){D([]),r.clear(),r.setBackgroundColor("#ffffff")}return Object(a.useEffect)((function(){if(console.log("useEffect()"),u){console.log("initialize the canvas..."),b(!1);var e=new x.Canvas("c",{isDrawingMode:!0,backgroundColor:"#ffffff"});e.setDimensions({width:T.current.offsetWidth,height:T.current.offsetHeight}),e.freeDrawingBrush&&(e.freeDrawingBrush.color=N,e.freeDrawingBrush.width=parseInt(O,10)||1),window.onresize=function(){e.setDimensions({width:T.current.offsetWidth,height:T.current.offsetHeight})},e.on("path:created",(function(){var t=JSON.stringify(e);D([].concat(Object(f.a)(R),[t])),console.log("HISTORY: ",R),J(t)})),o(e),j.on("draw",(function(t){e.loadFromJSON(t,(function(){e.renderAll(),D([].concat(Object(f.a)(R),[JSON.stringify(r)]))}))})),j.on("clear",(function(t){D([]),e.clear(),e.setBackgroundColor("#ffffff"),p("<strong>".concat(t,"</strong> cleared the drawing"),2e3)})),j.on("joinedRoom",k),j.on("userJoined",z),j.on("userLeft",E)}return function(){r.dispose()}}),[]),Object(c.jsxs)("main",{className:"draw-content",children:[Object(c.jsx)("div",{id:"canvas-wrapper",ref:T,children:Object(c.jsx)("canvas",{id:"c"})}),Object(c.jsxs)("div",{id:"tools",className:"open",ref:L,children:[Object(c.jsx)("section",{children:Object(c.jsx)("button",{id:"toggle-tools-btn",className:"btn",title:"toggle tools",onClick:function(){L.current.classList.toggle("open")},children:Object(c.jsx)("i",{className:"material-icons",children:"chevron_left"})})}),Object(c.jsx)("section",{children:Object(c.jsxs)("div",{id:"drawing-width-options",className:"mt-2",children:[Object(c.jsxs)("label",{className:"custom-radio-container",htmlFor:"draw-radio-sm",children:[Object(c.jsx)("input",{type:"radio",name:"draw-size",id:"draw-radio-sm",className:"draw-size-option",value:"5",onChange:I}),Object(c.jsx)("span",{className:"btn btn-outline-secondary icon-btn",id:"draw-size-sm",children:Object(c.jsx)("div",{className:"circle-sm"})})]}),Object(c.jsxs)("label",{className:"custom-radio-container",htmlFor:"draw-radio-md",children:[Object(c.jsx)("input",{type:"radio",name:"draw-size",id:"draw-radio-md",className:"draw-size-option",value:"10",onChange:I}),Object(c.jsx)("span",{className:"btn btn-outline-secondary icon-btn",id:"draw-size-md",children:Object(c.jsx)("div",{className:"circle-md"})})]}),Object(c.jsxs)("label",{className:"custom-radio-container",htmlFor:"draw-radio-lg",children:[Object(c.jsx)("input",{type:"radio",name:"draw-size",id:"draw-radio-lg",className:"draw-size-option",value:"25",onChange:I}),Object(c.jsx)("span",{className:"btn btn-outline-secondary icon-btn",id:"draw-size-lg",children:Object(c.jsx)("div",{className:"circle-lg"})})]}),Object(c.jsxs)("label",{className:"custom-radio-container",htmlFor:"draw-radio-xl",children:[Object(c.jsx)("input",{type:"radio",name:"draw-size",id:"draw-radio-xl",className:"draw-size-option",value:"50",onChange:I}),Object(c.jsx)("span",{className:"btn btn-outline-secondary icon-btn",id:"draw-size-xl",children:Object(c.jsx)("div",{className:"circle-xl"})})]})]})}),Object(c.jsx)("section",{className:"mb-2",children:Object(c.jsx)("input",{type:"color",value:N,id:"drawing-color",title:"color picker",onChange:function(e){C(e.currentTarget.value);var t=r.freeDrawingBrush;t.color=e.currentTarget.value,t.getPatternSrc&&(t.source=t.getPatternSrc.call(t))}})}),Object(c.jsx)("br",{}),Object(c.jsxs)("section",{children:[Object(c.jsx)("button",{id:"undo-stroke",className:"btn btn-outline-secondary icon-btn mb-2",title:"undo",onClick:function(){if(R.length>1){var e=R[R.length-2];D(Object(f.a)(R.slice(0,R.length-1))),null===e&&(e={}),t=e,r.loadFromJSON(t,(function(){r.renderAll(),J(t)})),o(r)}else B();var t},children:Object(c.jsx)("i",{className:"material-icons",children:"undo"})}),Object(c.jsx)("button",{id:"clear-canvas",className:"btn btn-outline-danger icon-btn mb-2",title:"clear",onClick:function(){B(),j.emit("clear")},children:Object(c.jsx)("i",{className:"material-icons",children:"delete"})}),Object(c.jsx)("a",{id:"save-image",className:"btn btn-outline-primary icon-btn",title:"save",onClick:function(e){e.currentTarget.download="drawing.png",e.currentTarget.href=r.toDataURL()},children:Object(c.jsx)("i",{className:"material-icons",children:"save"})})]})]})]})},v=n(14),w=n(23),N=function(e){var t=e.component,n=e.auth,a=Object(w.a)(e,["component","auth"]);return Object(c.jsx)(d.b,Object(v.a)(Object(v.a)({},a),{},{render:function(e){return void 0!==n?Object(c.jsx)(t,Object(v.a)({},e)):Object(c.jsx)(d.a,{to:"/"})}}))};var C=function(){var e=Object(d.g)(),t=Object(a.useState)(),n=Object(l.a)(t,2),s=n[0],r=n[1],o=Object(a.useState)(),i=Object(l.a)(o,2),u=(i[0],i[1]);function m(t){var n=t.uid,c=t.canvasState;console.log("JOINED ROOM"),r(n),u(c),e.push("/draw")}function f(t){var n=t.uid,c=t.roomId;console.log("ROOM CREATED"),console.log("ROOM ID: ",c),r(n),e.push("/draw");var a="The room code is <strong>".concat(c,"</strong>. Share it with your friends.");p(a,6e4)}Object(a.useEffect)((function(){j.on("joinedRoom",m),j.on("roomCreated",f)}),[]);var x=Object(c.jsxs)(d.d,{children:[Object(c.jsx)(d.b,{exact:!0,path:"/",component:h}),Object(c.jsx)(d.b,{path:"/joinRoom",component:b}),Object(c.jsx)(d.b,{path:"/createRoom",component:O}),Object(c.jsx)(N,{path:"/draw",component:g,auth:s,uid:s})]});return Object(c.jsx)(d.d,{children:Object(c.jsx)("div",{className:"App",children:Object(c.jsx)("div",{className:"App-content",children:x})})})},y=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,46)).then((function(t){var n=t.getCLS,c=t.getFID,a=t.getFCP,s=t.getLCP,r=t.getTTFB;n(e),c(e),a(e),s(e),r(e)}))};o.a.render(Object(c.jsx)(s.a.StrictMode,{children:Object(c.jsx)(i.a,{children:Object(c.jsx)(C,{})})}),document.getElementById("root")),y()}},[[45,1,2]]]);
//# sourceMappingURL=main.fae53624.chunk.js.map